// Generated by CoffeeScript 1.4.0

define(function(require, exports) {
  var codearea, convert, default_code, query, render, result, show, source;
  show = function(x) {
    return console.log(x);
  };
  query = function(id) {
    return document.querySelector(id);
  };
  codearea = require('../../codearea/codearea').codearea;
  source = query('#source');
  result = query('#result');
  codearea(source);
  convert = require('./lines').convert;
  default_code = localStorage.getItem('code');
  if (default_code.trim().length > 0) {
    source.value = default_code;
  }
  source.focus();
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  (render = function() {
    var code, value;
    value = source.value;
    localStorage.setItem('code', value);
    code = convert(value);
    result.innerHTML = "<pre class='language-lisp'><code class='lisp'>" + code + "</code></pre>";
    return hljs.highlightBlock(result.children[0].children[0]);
  })();
  source.addEventListener('keyup', render);
});
